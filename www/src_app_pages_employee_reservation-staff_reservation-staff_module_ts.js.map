{"version":3,"file":"src_app_pages_employee_reservation-staff_reservation-staff_module_ts.js","mappings":"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","sources":["./src/app/pages/employee/reservation-staff/reservation-staff-routing.module.ts","./src/app/pages/employee/reservation-staff/reservation-staff.module.ts","./src/app/pages/employee/reservation-staff/reservation-staff.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReservationStaffPage } from './reservation-staff.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReservationStaffPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReservationStaffPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReservationStaffPageRoutingModule } from './reservation-staff-routing.module';\n\nimport { ReservationStaffPage } from './reservation-staff.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ReservationStaffPageRoutingModule\n  ],\n  declarations: [ReservationStaffPage]\n})\nexport class ReservationStaffPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { Space } from 'src/app/core/models/spaces';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { ReservationsService } from 'src/app/core/services/modules/reservations.service';\nimport { NewReservationComponent } from 'src/app/shared/components/spaces/new-reservation/new-reservation.component';\nimport { PickRentSpaceComponent } from 'src/app/shared/components/spaces/pick-rent-space/pick-rent-space.component';\n\n@Component({\n  selector: 'app-reservation-staff',\n  templateUrl: './reservation-staff.page.html',\n  styleUrls: ['./reservation-staff.page.scss'],\n})\nexport class ReservationStaffPage implements OnInit {\n  loading = true;\n  itemList = [];\n  rentSpacesList: Space[]=[]\n  user: UserFormData;\n  filterSelected: '>'|'<' = '>'\n\n  filterItems = [\n    {name: 'PrÃ³ximas',filter: '>'},\n    {name: 'Pasadas',filter: '<'}\n  ]\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    private request: ReservationsService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    this.loadData().then(user => {\n      this.loading = false;\n    })\n  }\n\n  async loadData() {\n    const userData:any = await this.auth.getUser();\n    this.itemList = await this.request.readReservationsListOrderRent(\"startDate\",new Date().toISOString(),this.filterSelected);\n    console.log(this.itemList)\n    this.user = userData.data;\n    return this.user\n  }\n\n  filterChange(e){\n    this.filterSelected = e.detail.value;\n    this.loadData();\n  }\n\n  async doRefresh(refresh?){\n    // load \n    await this.loadData();\n    if (refresh){ refresh.target.complete(); }\n  }\n\n  async createReservation(){\n    const modalPick = await this.modal.create({\n      component: PickRentSpaceComponent,\n      componentProps: {reservation: null, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalPick.present();\n    const modalResult1 = await modalPick.onWillDismiss();\n    if(modalResult1.data){ this.openReservation(null,modalResult1.data)\n    }\n  }\n\n  async openReservation(reservation,space){\n    const modalCreate = await this.modal.create({\n      component: NewReservationComponent,\n      componentProps: {reservation, space, currentUser: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalCreate.present();\n    const modalResult2 = await modalCreate.onWillDismiss();\n    console.log(modalResult2);\n    if(modalResult2.data){ this.loadData()}\n  }\n\n}\n\n"],"names":["Component","IonRouterOutlet","ModalController","FireAuthService","ReservationsService","NewReservationComponent","PickRentSpaceComponent","ReservationStaffPage","constructor","modal","auth","request","routerOutlet","name","filter","ngOnInit","loading","loadData","then","user","userData","getUser","itemList","readReservationsListOrderRent","Date","toISOString","filterSelected","console","log","data","filterChange","e","detail","value","doRefresh","refresh","target","complete","createReservation","modalPick","create","component","componentProps","reservation","mode","presentingElement","nativeEl","present","modalResult1","onWillDismiss","openReservation","space","modalCreate","currentUser","modalResult2","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}