{"version":3,"file":"src_app_pages_client_reservations-resident_reservations-resident_module_ts.js","mappings":"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","sources":["./src/app/pages/client/reservations-resident/reservations-resident-routing.module.ts","./src/app/pages/client/reservations-resident/reservations-resident.module.ts","./src/app/pages/client/reservations-resident/reservations-resident.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReservationsResidentPage } from './reservations-resident.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReservationsResidentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReservationsResidentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReservationsResidentPageRoutingModule } from './reservations-resident-routing.module';\n\nimport { ReservationsResidentPage } from './reservations-resident.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReservationsResidentPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [ReservationsResidentPage]\n})\nexport class ReservationsResidentPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { UserController } from 'src/app/core/controller/user.controller';\nimport { Space } from 'src/app/core/models/spaces';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { ReservationsService } from 'src/app/core/services/modules/reservations.service';\nimport { NewReservationComponent } from 'src/app/shared/components/spaces/new-reservation/new-reservation.component';\nimport { PickRentSpaceComponent } from 'src/app/shared/components/spaces/pick-rent-space/pick-rent-space.component';\nimport { TimeHandlerModule } from 'src/app/shared/utilities/time-handler';\n\n@Component({\n  selector: 'app-reservations-resident',\n  templateUrl: './reservations-resident.page.html',\n  styleUrls: ['./reservations-resident.page.scss'],\n})\nexport class ReservationsResidentPage implements OnInit {\n  loading = true;\n  itemList = [];\n  rentSpacesList: Space[]=[]\n  user: UserFormData;\n  filterSelected: '>'|'<' = '>'\n\n  filterItems = [\n    {name: 'PrÃ³ximas',filter: '>'},\n    {name: 'Pasadas',filter: '<'}\n  ]\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    public userCtrl: UserController,\n    private time: TimeHandlerModule,\n    private request: ReservationsService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    console.log( this.userCtrl.user)\n    this.loadData().then(user => {\n      this.loading = false;\n    })\n  }\n\n  async loadData() {\n    const userData:any = await this.auth.getUser();\n    this.user = userData.data;\n    this.itemList = await this.request.\n    readUserReservationsListOrderRent(\"startDate\",new Date().toISOString(),this.userCtrl.currentUser.uid,this.filterSelected);\n    this.itemList = this.itemList.sort((a, b) => this.time.sortOldToNew(a, b));\n    this.itemList = this.itemList.sort((a, b) => this.time.sortNewToOld(a, b));\n    return this.user\n  }\n\n  filterChange(e){\n    this.filterSelected = e.detail.value;\n    this.loadData();\n  }\n\n  async doRefresh(refresh?){\n    // load \n    await this.loadData();\n    if (refresh){ refresh.target.complete(); }\n  }\n\n  async createReservation(){\n    const modalPick = await this.modal.create({\n      component: PickRentSpaceComponent,\n      componentProps: {reservation: null, user: this.userCtrl.user},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalPick.present();\n    const modalResult1 = await modalPick.onWillDismiss();\n    if(modalResult1.data){ this.openReservation(null,modalResult1.data)\n    }\n  }\n\n  async openReservation(reservation,space){\n    const modalCreate = await this.modal.create({\n      component: NewReservationComponent,\n      componentProps: {reservation, space, currentUser: this.user, users: [this.user] },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalCreate.present();\n    const modalResult2 = await modalCreate.onWillDismiss();\n    console.log(modalResult2);\n    if(modalResult2.data){ this.loadData()}\n  }\n\n}\n"],"names":["Component","IonRouterOutlet","ModalController","UserController","FireAuthService","ReservationsService","NewReservationComponent","PickRentSpaceComponent","TimeHandlerModule","ReservationsResidentPage","constructor","modal","auth","userCtrl","time","request","routerOutlet","name","filter","ngOnInit","loading","console","log","user","loadData","then","userData","getUser","data","itemList","readUserReservationsListOrderRent","Date","toISOString","currentUser","uid","filterSelected","sort","a","b","sortOldToNew","sortNewToOld","filterChange","e","detail","value","doRefresh","refresh","target","complete","createReservation","modalPick","create","component","componentProps","reservation","mode","presentingElement","nativeEl","present","modalResult1","onWillDismiss","openReservation","space","modalCreate","users","modalResult2","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}