{"version":3,"file":"src_app_pages_administrator_user-manager_user-manager_module_ts.js","mappings":"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","sources":["./src/app/core/services/modules/users.service.ts","./src/app/pages/administrator/user-manager/profile-detail/profile-detail.component.ts","./src/app/pages/administrator/user-manager/user-manager-routing.module.ts","./src/app/pages/administrator/user-manager/user-manager.module.ts","./src/app/pages/administrator/user-manager/user-manager.page.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ErrorHandlerService } from 'src/app/shared/utilities/error-handler.service';\nimport { userFormData } from '../../models/user';\nimport { FirestoreActionsService } from '../firestore-actions.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersService {\n\n  constructor(\n    private firestore: FirestoreActionsService,\n    private error: ErrorHandlerService,\n  ) { }\n\n  readAllUsers(){\n    return new Promise<userFormData[]>((resolve,reject) => {\n      this.firestore.readCollection('users')\n      .then((docs: any[]) => { resolve(docs) })\n      .catch((error) => { reject(this.error.handle(error)); });\n    });\n  }\n\n  readUser(UserUID:string){\n    return new Promise<userFormData>((resolve,reject) => {\n      this.firestore.readDocument('users',UserUID)\n      .then((docs: any) => { resolve(docs) })\n      .catch((error) => { reject(this.error.handle(error)); });\n    });\n  }\n\n  upgradeUser(uid: string){\n    return new Promise((resolve,reject) => {\n      this.firestore.setNamedDocument('users', uid, {manager: true})\n      .then((docs: any[]) => { resolve(docs) })\n      .catch((error) => { reject(this.error.handle(error)); });\n    });\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { userFormData } from 'src/app/core/models/user';\nimport { UsersService } from 'src/app/core/services/modules/users.service';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\n\n@Component({\n  selector: 'app-profile-detail',\n  templateUrl: './profile-detail.component.html',\n  styleUrls: ['./profile-detail.component.scss'],\n})\nexport class ProfileDetailComponent implements OnInit {\n  loading = false;\n  upgrading = false;\n  @Input() user: userFormData;\n  petList = []\n  defaultUser = '../../../../assets/profile/ProfileBlank.png';\n\n  constructor(\n    public modal: ModalController,\n    public alert: AlertsService,\n    private users: UsersService\n  ) { }\n\n  ngOnInit() { }\n\n  upgradeUser(){\n    this.alert.AlertConfirm('CAMBIO A ADMINISTRADOR', '¿Está seguro que desea cambiar a este usuario a Administrador?')\n    .then(answer => {\n      if(answer){ \n        console.log('Administrador Nuevo')\n        this.upgrading = true;\n        this.users.upgradeUser(this.user.uid).then(done => {\n          this.alert.showAlert(\n            'USUARIO MEJORADO',\n            'Solicite que el usuario ingrese a su perfil para continuar con el proceso',\n            'OK');\n          this.user.type = 'administrador';\n          this.upgrading = false;\n        }).catch(e => {\n          console.log(e);\n          this.upgrading = false;\n        })\n      }\n    })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserManagerPage } from './user-manager.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserManagerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserManagerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserManagerPageRoutingModule } from './user-manager-routing.module';\n\nimport { UserManagerPage } from './user-manager.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ProfileDetailComponent } from './profile-detail/profile-detail.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    UserManagerPageRoutingModule\n  ],\n  declarations: [\n    UserManagerPage,\n    ProfileDetailComponent\n  ]\n})\nexport class UserManagerPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { resolve } from 'dns';\nimport { ProfileDetailComponent } from 'src/app/pages/administrator/user-manager/profile-detail/profile-detail.component';\nimport { userFormData } from 'src/app/core/models/user';\nimport { UsersService } from 'src/app/core/services/modules/users.service';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\n\n@Component({\n  selector: 'app-user-manager',\n  templateUrl: './user-manager.page.html',\n  styleUrls: ['./user-manager.page.scss'],\n})\nexport class UserManagerPage implements OnInit {\n  loading = true;\n  userList: userFormData[] = [];\n\n  constructor(\n    private users: UsersService,\n    private modal: ModalController,\n    private routerOutlet: IonRouterOutlet,\n  ) { }\n\n  ngOnInit() {\n    this.loadUsers()\n    .then(() => {this.loading = false;})\n    .catch(() => {this.loading = false;})\n  }\n\n  loadUsers(){\n    return new Promise((resolve,reject) => {\n      this.users.readAllUsers()\n      .then(list => {\n        console.log(list);\n        this.userList = list;\n        resolve('ok')\n      }).catch(error => {\n        console.log(error);\n        reject('error');\n      })\n    })\n  }\n\n  async userDetail(user){\n    const modal = await this.modal.create({\n      component: ProfileDetailComponent,\n      componentProps: {user},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.loadUsers(); }\n  }\n\n  doRefresh(refresh?){\n    this.loadUsers().then(done => {\n      console.log('done');\n      if (refresh){ refresh.target.complete(); }\n    }).catch(error => {\n      console.log(error);\n      if (refresh){ refresh.target.complete(); }\n    })\n  }\n\n}\n"],"names":["Component","IonRouterOutlet","ModalController","ProfileDetailComponent","UsersService","UserManagerPage","constructor","users","modal","routerOutlet","ngOnInit","loadUsers","then","loading","catch","Promise","resolve","reject","readAllUsers","list","console","log","userList","error","userDetail","user","create","component","componentProps","mode","presentingElement","nativeEl","present","modalResult","onWillDismiss","data","doRefresh","refresh","done","target","complete","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}