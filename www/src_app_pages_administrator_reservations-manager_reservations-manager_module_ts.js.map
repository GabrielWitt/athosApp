{"version":3,"file":"src_app_pages_administrator_reservations-manager_reservations-manager_module_ts.js","mappings":"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","sources":["./src/app/pages/administrator/reservations-manager/reservation-admin/reservation-admin.component.ts","./src/app/pages/administrator/reservations-manager/reservations-manager-routing.module.ts","./src/app/pages/administrator/reservations-manager/reservations-manager.module.ts","./src/app/pages/administrator/reservations-manager/reservations-manager.page.ts","./src/app/pages/administrator/reservations-manager/spaces-admin/spaces-admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { Space } from 'src/app/core/models/spaces';\nimport { userFormData } from 'src/app/core/models/user';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { NewReservationComponent } from 'src/app/shared/components/spaces/new-reservation/new-reservation.component';\nimport { PickRentSpaceComponent } from 'src/app/shared/components/spaces/pick-rent-space/pick-rent-space.component';\n\n@Component({\n  selector: 'app-reservation-admin',\n  templateUrl: './reservation-admin.component.html',\n  styleUrls: ['./reservation-admin.component.scss'],\n})\nexport class ReservationAdminComponent implements OnInit {\n  loading = true;\n  itemList = [];\n  rentSpacesList: Space[]=[]\n  user: userFormData;\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.checkUser().then(user => {\n    })\n  }\n\n  async checkUser() {\n    this.loading = true;\n    const userData:any = await this.auth.getUser();\n    this.user = userData.data;\n    this.loading = false;\n    return this.user\n  }\n\n  async doRefresh(refresh?){\n    // load \n    if (refresh){ refresh.target.complete(); }\n  }\n\n  async createReservation(){\n    const modalPick = await this.modal.create({\n      component: PickRentSpaceComponent,\n      componentProps: {reservation: null, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalPick.present();\n    const modalResult1 = await modalPick.onWillDismiss();\n    console.log(modalResult1);\n    if(modalResult1.data){ \n      const modalCreate = await this.modal.create({\n        component: NewReservationComponent,\n        componentProps: {reservation: null, space:modalResult1.data, user: this.user },\n        mode: 'ios',\n        presentingElement: this.routerOutlet.nativeEl\n      });\n      modalCreate.present();\n      const modalResult2 = await modalCreate.onWillDismiss();\n      console.log(modalResult2);\n      if(modalResult2.data){ console.log('reload spaces')}\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReservationsManagerPage } from './reservations-manager.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReservationsManagerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReservationsManagerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReservationsManagerPageRoutingModule } from './reservations-manager-routing.module';\n\nimport { ReservationsManagerPage } from './reservations-manager.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { SpacesAdminComponent } from './spaces-admin/spaces-admin.component';\nimport { ReservationAdminComponent } from './reservation-admin/reservation-admin.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ReservationsManagerPageRoutingModule\n  ],\n  declarations: [\n    ReservationsManagerPage,\n    SpacesAdminComponent,\n    ReservationAdminComponent\n  ]\n})\nexport class ReservationsManagerPageModule {}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-reservations-manager',\n  templateUrl: './reservations-manager.page.html',\n  styleUrls: ['./reservations-manager.page.scss'],\n})\nexport class ReservationsManagerPage implements OnInit {\n  selectedTab = 'reservations';\n\n  constructor() { }\n\n  ngOnInit() {}\n\n  segmentChanged(ev: any) {\n    this.selectedTab = ev.detail.value;\n  }\n\n}","import { Component, OnInit } from '@angular/core';\nimport { userFormData } from 'src/app/core/models/user';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { NewSpaceComponent } from 'src/app/shared/components/spaces/new-space/new-space.component';\nimport { SpacesService } from 'src/app/core/services/modules/spaces.service';\nimport { TimeHandlerModule } from 'src/app/shared/utilities/time-handler';\nimport { Space } from 'src/app/core/models/spaces';\n\n@Component({\n  selector: 'app-spaces-admin',\n  templateUrl: './spaces-admin.component.html',\n  styleUrls: ['./spaces-admin.component.scss'],\n})\nexport class SpacesAdminComponent implements OnInit {\n  loading = true;\n  itemList = []\n  user: userFormData;\n\n  filterSelected = 'Todos';\n  filterSelection = { name: 'Todos', filter: null, value: null };\n  filterItems = [\n    { name: 'Todos', filter: null, value: null },\n    { name: 'Espacios a Reservar', filter: 'rent', value: true },\n    { name: 'Espacios Privados', filter: 'spaceType', value: 'privado' },\n    { name: 'Espacios Comunitarios', filter: 'spaceType', value: 'comunal' },\n  ]\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    private spaces: SpacesService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    this.loadData().then(user => {\n      this.loading = false;\n    })\n  }\n\n  async loadData(reload?) {\n    try {\n      let list: Space[] = [];\n      const userData:any = await this.auth.getUser();\n      if(this.filterSelection.filter){\n        list = await this.spaces.\n        readSpacesListOrderRent(this.filterSelection.filter,this.filterSelection.value);\n      }else{list = await this.spaces.readSpacesListOrder();}\n      if(reload){\n        if(list.length>0 && list.length < this.itemList.length){\n          list.forEach(newItem => {\n            let found = false;\n            this.itemList.forEach(item => {\n              if(newItem.uid === item.uid){ item = newItem; found= true;}\n            })\n            if(!found)(this.itemList.push(newItem));\n          })\n        }else{ this.itemList = list;}\n      }else{ this.itemList = list;}\n      this.user = userData.data;\n      return this.user\n    } catch (error) {\n      console.log(error)\n      this.loading = false;\n    }\n  }\n\n  async doRefresh(refresh?){\n    await this.loadData()\n    if (refresh){ refresh.target.complete(); }\n  }\n\n\n  filterChange(e) { \n    this.filterSelected = e.detail.value;\n    let selection = null;\n    this.filterItems.forEach(item => {\n      if(item.name === this.filterSelected){selection = item}\n    })\n    if(selection){ this.filterSelection = selection;}\n    this.loadData();\n  }\n\n  async createSpace(){\n    const modal = await this.modal.create({\n      component: NewSpaceComponent,\n      componentProps: {space: null, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    console.log(modalResult);\n    if(modalResult.data){ this.loadData();}\n  }\n\n  async detailSpace(space){\n    const modal = await this.modal.create({\n      component: NewSpaceComponent,\n      componentProps: {space, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.loadData(true);}\n  }\n\n}\n"],"names":["Component","IonRouterOutlet","ModalController","FireAuthService","NewReservationComponent","PickRentSpaceComponent","ReservationAdminComponent","constructor","modal","auth","routerOutlet","ngOnInit","checkUser","then","user","loading","userData","getUser","data","doRefresh","refresh","target","complete","createReservation","modalPick","create","component","componentProps","reservation","mode","presentingElement","nativeEl","present","modalResult1","onWillDismiss","console","log","modalCreate","space","modalResult2","selector","template","NewSpaceComponent","SpacesService","SpacesAdminComponent","spaces","name","filter","value","loadData","reload","list","filterSelection","readSpacesListOrderRent","readSpacesListOrder","length","itemList","forEach","newItem","found","item","uid","push","error","filterChange","e","filterSelected","detail","selection","filterItems","createSpace","modalResult","detailSpace"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}