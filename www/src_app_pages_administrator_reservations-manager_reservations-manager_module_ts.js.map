{"version":3,"file":"src_app_pages_administrator_reservations-manager_reservations-manager_module_ts.js","mappings":"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","sources":["./src/app/pages/administrator/reservations-manager/reservation-admin/reservation-admin.component.ts","./src/app/pages/administrator/reservations-manager/reservations-manager-routing.module.ts","./src/app/pages/administrator/reservations-manager/reservations-manager.module.ts","./src/app/pages/administrator/reservations-manager/reservations-manager.page.ts","./src/app/pages/administrator/reservations-manager/spaces-admin/spaces-admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { Space } from 'src/app/core/models/spaces';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { ReservationsService } from 'src/app/core/services/modules/reservations.service';\nimport { NewReservationComponent } from 'src/app/shared/components/spaces/new-reservation/new-reservation.component';\nimport { PickRentSpaceComponent } from 'src/app/shared/components/spaces/pick-rent-space/pick-rent-space.component';\n\n@Component({\n  selector: 'app-reservation-admin',\n  templateUrl: './reservation-admin.component.html',\n  styleUrls: ['./reservation-admin.component.scss'],\n})\nexport class ReservationAdminComponent implements OnInit {\n  loading = true;\n  itemList = [];\n  rentSpacesList: Space[]=[]\n  user: UserFormData;\n  filterSelected: '>'|'<' = '>'\n\n  filterItems = [\n    {name: 'Próximas',filter: '>'},\n    {name: 'Pasadas',filter: '<'}\n  ]\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    private request: ReservationsService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    this.loadData().then(user => {\n      this.loading = false;\n    })\n  }\n\n  async loadData() {\n    const userData:any = await this.auth.getUser();\n    this.itemList = await this.request.readReservationsListOrderRent(\"startDate\",new Date().toISOString(),this.filterSelected);\n    console.log(this.itemList)\n    this.user = userData.data;\n    return this.user\n  }\n\n  filterChange(e){\n    this.filterSelected = e.detail.value;\n    this.loadData();\n  }\n\n  async doRefresh(refresh?){\n    // load \n    await this.loadData();\n    if (refresh){ refresh.target.complete(); }\n  }\n\n  async createReservation(){\n    const modalPick = await this.modal.create({\n      component: PickRentSpaceComponent,\n      componentProps: {reservation: null, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalPick.present();\n    const modalResult1 = await modalPick.onWillDismiss();\n    if(modalResult1.data){ this.openReservation(null,modalResult1.data)\n    }\n  }\n\n  async openReservation(reservation,space){\n    const modalCreate = await this.modal.create({\n      component: NewReservationComponent,\n      componentProps: {reservation, space, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalCreate.present();\n    const modalResult2 = await modalCreate.onWillDismiss();\n    console.log(modalResult2);\n    if(modalResult2.data){ this.loadData()}\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReservationsManagerPage } from './reservations-manager.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReservationsManagerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReservationsManagerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReservationsManagerPageRoutingModule } from './reservations-manager-routing.module';\n\nimport { ReservationsManagerPage } from './reservations-manager.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { SpacesAdminComponent } from './spaces-admin/spaces-admin.component';\nimport { ReservationAdminComponent } from './reservation-admin/reservation-admin.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ReservationsManagerPageRoutingModule\n  ],\n  declarations: [\n    ReservationsManagerPage,\n    SpacesAdminComponent,\n    ReservationAdminComponent\n  ]\n})\nexport class ReservationsManagerPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { UserController } from 'src/app/core/controller/user.controller';\n\n@Component({\n  selector: 'app-reservations-manager',\n  templateUrl: './reservations-manager.page.html',\n  styleUrls: ['./reservations-manager.page.scss'],\n})\nexport class ReservationsManagerPage implements OnInit {\n  selectedTab = 'reservations';\n\n  constructor(public userCtrl: UserController) { }\n\n  ngOnInit() {}\n\n  segmentChanged(ev: any) {\n    this.selectedTab = ev.detail.value;\n  }\n\n}","import { Component, OnInit } from '@angular/core';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\nimport { NewSpaceComponent } from 'src/app/shared/components/spaces/new-space/new-space.component';\nimport { SpacesService } from 'src/app/core/services/modules/spaces.service';\nimport { TimeHandlerModule } from 'src/app/shared/utilities/time-handler';\nimport { Space } from 'src/app/core/models/spaces';\n\n@Component({\n  selector: 'app-spaces-admin',\n  templateUrl: './spaces-admin.component.html',\n  styleUrls: ['./spaces-admin.component.scss'],\n})\nexport class SpacesAdminComponent implements OnInit {\n  loading = true;\n  itemList = []\n  user: UserFormData;\n\n  filterSelected = 'Todos';\n  filterItems = ['Todos','oficina','vivienda' , 'parqueo' , 'recepción' , 'bodega' , 'salón' , 'tienda' , 'terraza']\n\n  constructor(\n    private modal: ModalController,\n    private auth: FireAuthService,\n    private spaces: SpacesService,\n    private routerOutlet: IonRouterOutlet\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    this.loadData().then(user => {\n      this.loading = false;\n    })\n  }\n\n  async loadData(reload?) {\n    try {\n      let list: Space[] = [];\n      const userData:any = await this.auth.getUser();\n      if(this.filterSelected === 'Todos'){\n        list = await this.spaces.readSpacesListOrder()\n      }else{list = await this.spaces.readSpacesListOrderType(this.filterSelected);}\n      if(reload){\n        if(list.length>0 && list.length < this.itemList.length){\n          list.forEach(newItem => {\n            let found = false;\n            this.itemList.forEach(item => {\n              if(newItem.uid === item.uid){ item = newItem; found= true;}\n            })\n            if(!found)(this.itemList.push(newItem));\n          })\n        }else{ this.itemList = list;}\n      }else{ this.itemList = list;}\n      this.user = userData.data;\n      return this.user\n    } catch (error) {\n      console.log(error)\n      this.loading = false;\n    }\n  }\n\n  async doRefresh(refresh?){\n    await this.loadData()\n    if (refresh){ refresh.target.complete(); }\n  }\n\n\n  filterChange(e) { \n    this.filterSelected = e.detail.value;\n    this.loadData();\n  }\n\n  async createSpace(){\n    const modal = await this.modal.create({\n      component: NewSpaceComponent,\n      componentProps: {space: null, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    console.log(modalResult);\n    if(modalResult.data){ this.loadData();}\n  }\n\n  async detailSpace(space){\n    const modal = await this.modal.create({\n      component: NewSpaceComponent,\n      componentProps: {space, user: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.loadData(true);}\n  }\n}\n"],"names":["Component","IonRouterOutlet","ModalController","FireAuthService","ReservationsService","NewReservationComponent","PickRentSpaceComponent","ReservationAdminComponent","constructor","modal","auth","request","routerOutlet","name","filter","ngOnInit","loading","loadData","then","user","userData","getUser","itemList","readReservationsListOrderRent","Date","toISOString","filterSelected","console","log","data","filterChange","e","detail","value","doRefresh","refresh","target","complete","createReservation","modalPick","create","component","componentProps","reservation","mode","presentingElement","nativeEl","present","modalResult1","onWillDismiss","openReservation","space","modalCreate","modalResult2","selector","template","NewSpaceComponent","SpacesService","SpacesAdminComponent","spaces","reload","list","readSpacesListOrder","readSpacesListOrderType","length","forEach","newItem","found","item","uid","push","error","createSpace","modalResult","detailSpace"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}