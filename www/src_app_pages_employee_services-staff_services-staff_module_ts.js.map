{"version":3,"file":"src_app_pages_employee_services-staff_services-staff_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAGA;AACA;IAOaG,uBAAuB,SAAvBA,uBAAuB;EAUlCC,YACUC,QADV,EAESC,IAFT,EAE8B;IADpB;IACD;IAXT,qBAAgC,EAAhC;IAEA,eAAU,KAAV;IACA,sBAA0B,GAA1B;IAEA,mBAAc,CACZ;MAACC,IAAI,EAAE,UAAP;MAAkBC,MAAM,EAAE;IAA1B,CADY,EAEZ;MAACD,IAAI,EAAE,SAAP;MAAiBC,MAAM,EAAE;IAAzB,CAFY,CAAd;EAOK;;EAELC,QAAQ;IACN,KAAKC,OAAL,GAAe,IAAf;IACA,KAAKC,QAAL,GAAgBC,IAAhB,CAAqB,MAAK;MAAE,KAAKF,OAAL,GAAe,KAAf;IAAsB,CAAlD;EACD;;EAEKC,QAAQ;IAAA;;IAAA;MACZ,MAAME,IAAI,SAAS,KAAI,CAACP,IAAL,CAAUQ,OAAV,EAAnB;MACA,KAAI,CAACC,WAAL,GAAmBF,IAAI,CAACG,IAAxB;MACA,KAAI,CAACC,aAAL,SAA2B,KAAI,CAACZ,QAAL,CAAca,wBAAd,CAAuC,KAAI,CAACH,WAAL,CAAiBI,GAAxD,EAA6D,IAAIC,IAAJ,GAAWC,WAAX,EAA7D,EAAsF,KAAI,CAACC,cAA3F,CAA3B;;MACA,KAAI,CAACL,aAAL,CAAmBM,IAAnB,CAAwB,CAACC,CAAD,EAAGC,CAAH,KAAO;QAC7B,IAAGD,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAAnB,EAA6B;UAAC,OAAO,CAAP;QAAS;;QACvC,IAAGF,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAAnB,EAA6B;UAAC,OAAO,CAAC,CAAR;QAAU;;QACxC,OAAO,CAAP;MACD,CAJD;;MAKAC,OAAO,CAACC,GAAR,CAAY,KAAI,CAACX,aAAjB;MACA,OAAO,IAAP;MACA;;;;;;IAXY;EAiBb;;EAEKY,SAAS,CAACC,OAAD,EAAS;IAAA;;IAAA;MACtB;MACA,MAAM,MAAI,CAACnB,QAAL,EAAN;;MACA,IAAImB,OAAJ,EAAY;QAAEA,OAAO,CAACC,MAAR,CAAeC,QAAf;MAA4B;IAHpB;EAIvB;;EAEDC,YAAY,CAACC,CAAD,EAAE;IACZ,KAAKZ,cAAL,GAAsBY,CAAC,CAACC,MAAF,CAASC,KAA/B;IACA,KAAKzB,QAAL;EACD;;AAhDiC;;;QAR3BV,2FAAeA;;QACfC,4FAAeA;;;AAOXC,uBAAuB,sDALnCH,wDAAS,CAAC;EACTqC,QAAQ,EAAE,qBADD;EAETC,UAAAA,uEAFS;;AAAA,CAAD,CAK0B,GAAvBnC,uBAAuB,CAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXb;AAEA;AAEA;AACA;AACA;IAOawC,uBAAuB,SAAvBA,uBAAuB;EAKlCvC,YACSwC,QADT,EAEStC,IAFT,EAGUuC,YAHV,EAISC,KAJT,EAI+B;IAHtB;IACA;IACC;IACD;IAPT,eAAU,KAAV;IACA,oBAAe,qCAAf;EAOK;;EAELrC,QAAQ;IACN,KAAKH,IAAL,CAAUQ,OAAV,GAAoBF,IAApB,CAA0BC,IAAD,IAAc;MACrC,KAAKA,IAAL,GAAYA,IAAI,CAACG,IAAjB;IACD,CAFD;EAGD;;EAEKa,SAAS,CAACC,OAAD,EAAS;IAAA;;IAAA;MACtB,KAAI,CAACpB,OAAL,GAAe,IAAf;;MACA,KAAI,CAACkC,QAAL,CAAcG,YAAd,CAA2B,KAAI,CAAClC,IAAL,CAAUmC,IAArC,EACCpC,IADD,CACM,MAAK;QACT,KAAI,CAACF,OAAL,GAAe,KAAf;;QACA,IAAIoB,OAAJ,EAAY;UAAEA,OAAO,CAACC,MAAR,CAAeC,QAAf;QAA4B;MAC3C,CAJD;IAFsB;EAOvB;;EAEDiB,QAAQ,CAACC,KAAD,EAAM;IACZ,IAAGA,KAAK,CAACC,IAAT,EAAc;MAAC,OAAOD,KAAK,CAACE,QAAN,CAAeC,IAAf,GAAsB,GAA7B;IAAmC,CAAlD,MACI;MAAE,OAAO,QAAP;IAAkB;EACzB;;EAEKC,WAAW,CAACC,OAAD,EAAUC,OAAV,EAAiB;IAAA;;IAAA;MAChC,MAAMC,WAAW,SAAS,MAAI,CAACX,KAAL,CAAWY,MAAX,CAAkB;QAC1CC,SAAS,EAAEjB,qHAD+B;QAE1CkB,cAAc,EAAE;UAACJ,OAAD;UAAUD,OAAV;UAAmBxC,WAAW,EAAE,MAAI,CAACF;QAArC,CAF0B;QAG1CgD,IAAI,EAAE,KAHoC;QAI1CC,iBAAiB,EAAE,MAAI,CAACjB,YAAL,CAAkBkB;MAJK,CAAlB,CAA1B;MAMAN,WAAW,CAACO,OAAZ;MACA,MAAMC,YAAY,SAASR,WAAW,CAACS,aAAZ,EAA3B;MACAvC,OAAO,CAACC,GAAR,CAAYqC,YAAZ;;MACA,IAAGA,YAAY,CAACjD,IAAhB,EAAqB;QAAG,MAAI,CAAC4B,QAAL,CAAcuB,SAAd,CAAwB,aAAxB;MAAwC;IAVhC;EAWjC;;AA3CiC;;;QAT3B1B,2FAAkBA;;QAElBvC,4FAAeA;;QAJfqC,2DAAeA;;QAAEC,2DAAeA;;;AAW5BG,uBAAuB,sDALnC3C,wDAAS,CAAC;EACTqC,QAAQ,EAAE,qBADD;EAETC,UAAAA,uEAFS;;AAAA,CAAD,CAK0B,GAAvBK,uBAAuB,CAAvB;;;;;;;;;;;;;;;;;;;;ACb4B;AACc;AAEG;AAE1D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mEAAiB;KAC7B;CACF,CAAC;IAMW,8BAA8B,SAA9B,8BAA8B;CAAG;AAAjC,8BAA8B;IAJ1C,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,8BAA8B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBsB;AAClB;AACF;AAEA;AAEoC;AAEvB;AAC4B;AACA;AACN;AACpB;IAkB/C,uBAAuB,SAAvB,uBAAuB;CAAG;AAA1B,uBAAuB;IAhBnC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,wDAAW;YACX,sEAAY;YACZ,0FAA8B;SAC/B;QACD,YAAY,EAAE;YACZ,mEAAiB;YACjB,+FAAuB;YACvB,+FAAuB;YACvB,yFAAqB;SACtB;QACD,OAAO,EAAE,CAAC,iEAAsB,CAAC;KAClC,CAAC;GACW,uBAAuB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AC9Bc;AACuB;IAO5D,iBAAiB,SAAjB,iBAAiB;IAG5B,YAAmB,QAAwB;QAAxB,aAAQ,GAAR,QAAQ,CAAgB;QAF3C,gBAAW,GAAG,UAAU;IAEuB,CAAC;IAEhD,QAAQ;IACR,CAAC;IAED,cAAc,CAAC,EAAO;QACpB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;IACrC,CAAC;CACF;;YAlBQ,mFAAc;;AAOV,iBAAiB;IAL7B,wDAAS,CAAC;QACT,QAAQ,EAAE,oBAAoB;QAC9B,2EAAyC;;KAE1C,CAAC;GACW,iBAAiB,CAW7B;AAX6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACR9B;AAEA;AACA;AACA;AACA;AACA;AACA;IAOa6B,qBAAqB,SAArBA,qBAAqB;EAMhCpE,YACU0C,KADV,EAEU2B,QAFV,EAGUC,WAHV,EAIUC,QAJV,EAKU9B,YALV,EAKuC;IAJ7B;IACA;IACA;IACA;IACA;IAVV,eAAU,IAAV;IAEA,gBAAW,EAAX;EASK;;EAELpC,QAAQ;IACN,KAAKE,QAAL;EACD;;EAEKA,QAAQ;IAAA;;IAAA;MACZ,MAAMiE,QAAQ,SAAa,KAAI,CAACD,QAAL,CAAcE,QAAd,EAA3B;MACA,KAAI,CAAChE,IAAL,GAAY+D,QAAQ,CAAC5D,IAArB;MACA,KAAI,CAAC8D,KAAL,SAAmB,KAAI,CAACJ,WAAL,CAAiBK,YAAjB,EAAnB;MACA,KAAI,CAACC,QAAL,SAAsB,KAAI,CAACP,QAAL,CAAcQ,oBAAd,EAAtB;MACA,KAAI,CAACvE,OAAL,GAAe,KAAf;MACA,OAAO,KAAI,CAACG,IAAZ;IANY;EAOb;;EAEKgB,SAAS,CAACC,OAAD,EAAS;IAAA;;IAAA;MACtB,MAAM,MAAI,CAACnB,QAAL,EAAN;;MACA,IAAImB,OAAJ,EAAY;QAAEA,OAAO,CAACC,MAAR,CAAeC,QAAf;MAA4B;IAFpB;EAGvB;;EAEKkD,aAAa;IAAA;;IAAA;MACjB,MAAMC,YAAY,SAAS,MAAI,CAACrC,KAAL,CAAWY,MAAX,CAAkB;QAC3CC,SAAS,EAAEU,wHADgC;QAE3CT,cAAc,EAAC;UAAC/C,IAAI,EAAC,MAAI,CAACA;QAAX,CAF4B;QAG3CgD,IAAI,EAAE,KAHqC;QAI3CC,iBAAiB,EAAE,MAAI,CAACjB,YAAL,CAAkBkB;MAJM,CAAlB,CAA3B;MAMAoB,YAAY,CAACnB,OAAb;MACA,MAAMoB,YAAY,SAASD,YAAY,CAACjB,aAAb,EAA3B;;MACA,IAAGkB,YAAY,CAACpE,IAAhB,EAAqB;QAAE,MAAI,CAACqE,WAAL,CAAiB,IAAjB,EAAsBD,YAAY,CAACpE,IAAnC;MACtB;IAVgB;EAWlB;;EAEKqE,WAAW,CAAC9B,OAAD,EAAUC,OAAV,EAAiB;IAAA;;IAAA;MAChC,MAAMC,WAAW,SAAS,MAAI,CAACX,KAAL,CAAWY,MAAX,CAAkB;QAC1CC,SAAS,EAAEjB,qHAD+B;QAE1CkB,cAAc,EAAE;UAACJ,OAAD;UAAUD,OAAV;UAAmBxC,WAAW,EAAE,MAAI,CAACF,IAArC;UAA2CiE,KAAK,EAAE,MAAI,CAACA;QAAvD,CAF0B;QAG1CjB,IAAI,EAAE,KAHoC;QAI1CC,iBAAiB,EAAE,MAAI,CAACjB,YAAL,CAAkBkB;MAJK,CAAlB,CAA1B;MAMAN,WAAW,CAACO,OAAZ;MACA,MAAMC,YAAY,SAASR,WAAW,CAACS,aAAZ,EAA3B;MACAvC,OAAO,CAACC,GAAR,CAAYqC,YAAZ;;MACA,IAAGA,YAAY,CAACjD,IAAhB,EAAqB;QAAE,MAAI,CAACL,QAAL;MAAgB;IAVP;EAWjC;;AAxD+B;;;QAZR6B,2DAAeA;;QAKhC+B,2FAAeA;;QADfD,qFAAYA;;QAHZF,mFAAcA;;QADd7B,2DAAeA;;;AAYXiC,qBAAqB,sDALjCxE,yDAAS,CAAC;EACTqC,QAAQ,EAAE,mBADD;EAETC,UAAAA,qEAFS;;AAAA,CAAD,CAKwB,GAArBkC,qBAAqB,CAArB","sources":["./src/app/pages/employee/services-staff/calendar-orders/calendar-orders.component.ts","./src/app/pages/employee/services-staff/services-orders/services-orders.component.ts","./src/app/pages/employee/services-staff/services-staff-routing.module.ts","./src/app/pages/employee/services-staff/services-staff.module.ts","./src/app/pages/employee/services-staff/services-staff.page.ts","./src/app/pages/employee/services-staff/ticket-orders/ticket-orders.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CalendarItem } from 'src/app/core/models/calendar';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { CalendarService } from 'src/app/core/services/modules/calendar.service';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\n\n@Component({\n  selector: 'app-calendar-orders',\n  templateUrl: './calendar-orders.component.html',\n  styleUrls: ['./calendar-orders.component.scss'],\n})\nexport class CalendarOrdersComponent implements OnInit {\n  calendarItems: CalendarItem[] = [];\n  currentUser: UserFormData;\n  loading = false;\n  filterSelected: '>'|'<' = '>'\n\n  filterItems = [\n    {name: 'PrÃ³ximas',filter: '>'},\n    {name: 'Pasadas',filter: '<'}\n  ]\n  constructor(\n    private calendar: CalendarService, \n    public auth: FireAuthService\n  ) { }\n\n  ngOnInit() {\n    this.loading = true;\n    this.loadData().then(() => {this.loading = false;});\n  }\n\n  async loadData(){\n    const user = await this.auth.getUser()\n    this.currentUser = user.data;\n    this.calendarItems = await this.calendar.readFutureServicesByUser(this.currentUser.uid, new Date().toISOString(),this.filterSelected);\n    this.calendarItems.sort((a,b)=>{\n      if(a.startDate > b.startDate){return 1}\n      if(a.startDate < b.startDate){return -1}\n      return 0\n    })\n    console.log(this.calendarItems);\n    return null;\n    /*\n    this.calendarItems = await this.calendar.readScheduleServicesByUser(this.currentUser.uid);\n    this.calendar.readReservationCalendar().then(data => {\n      console.log(data);\n    })\n     */\n  }\n\n  async doRefresh(refresh?){\n    // load \n    await this.loadData();\n    if (refresh){ refresh.target.complete(); }\n  }\n\n  filterChange(e){\n    this.filterSelected = e.detail.value;\n    this.loadData();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { UserController } from 'src/app/core/controller/user.controller';\nimport { ServicesController } from 'src/app/core/controller/services.controller';\nimport { NewRequestComponent } from 'src/app/shared/components/services/new-request/new-request.component';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\n\n@Component({\n  selector: 'app-services-orders',\n  templateUrl: './services-orders.component.html',\n  styleUrls: ['./services-orders.component.scss'],\n})\nexport class ServicesOrdersComponent implements OnInit {\n  user: UserFormData\n  loading = false;\n  defaultSpace = '../../../../../assets/blueprint.png';\n\n  constructor(\n    public services: ServicesController,\n    public auth: FireAuthService,\n    private routerOutlet: IonRouterOutlet,\n    public modal: ModalController\n  ) { }\n\n  ngOnInit() { \n    this.auth.getUser().then((user: any) =>{\n      this.user = user.data;\n    });\n  }\n\n  async doRefresh(refresh?){\n    this.loading = true;\n    this.services.loadServices(this.user.type)\n    .then(() => { \n      this.loading = false;\n      if (refresh){ refresh.target.complete(); }\n    });\n  }\n\n  showCost(space){\n    if(space.rent){return space.rentData.cost + \"$\"; }\n    else{ return 'Gratis'; }\n  }\n\n  async pickService(request, service){\n    const modalCreate = await this.modal.create({\n      component: NewRequestComponent,\n      componentProps: {service, request, currentUser: this.user },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalCreate.present();\n    const modalResult2 = await modalCreate.onWillDismiss();\n    console.log(modalResult2);\n    if(modalResult2.data){  this.services.changeTab('maintenance') }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ServicesStaffPage } from './services-staff.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ServicesStaffPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ServicesStaffPageRoutingModule {}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ServicesStaffPageRoutingModule } from './services-staff-routing.module';\n\nimport { ServicesStaffPage } from './services-staff.page';\nimport { CalendarOrdersComponent } from './calendar-orders/calendar-orders.component';\nimport { ServicesOrdersComponent } from './services-orders/services-orders.component';\nimport { TicketOrdersComponent } from './ticket-orders/ticket-orders.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ServicesStaffPageRoutingModule\n  ],\n  declarations: [\n    ServicesStaffPage,\n    CalendarOrdersComponent,\n    ServicesOrdersComponent,\n    TicketOrdersComponent\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class ServicesStaffPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { UserController } from 'src/app/core/controller/user.controller';\n\n@Component({\n  selector: 'app-services-staff',\n  templateUrl: './services-staff.page.html',\n  styleUrls: ['./services-staff.page.scss'],\n})\nexport class ServicesStaffPage implements OnInit {\n  selectedTab = 'calendar'\n\n  constructor(public userCtrl: UserController) { }\n\n  ngOnInit() {\n  }\n\n  segmentChanged(ev: any) {\n    this.selectedTab = ev.detail.value;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { UserFormData } from 'src/app/core/models/user';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { UserController } from 'src/app/core/controller/user.controller';\nimport { NewRequestComponent } from 'src/app/shared/components/services/new-request/new-request.component';\nimport { PickServiceComponent } from 'src/app/shared/components/services/pick-service/pick-service.component';\nimport { UsersService } from 'src/app/core/services/modules/users.service';\nimport { RequestsService } from 'src/app/core/services/modules/requests.service';\n\n@Component({\n  selector: 'app-ticket-orders',\n  templateUrl: './ticket-orders.component.html',\n  styleUrls: ['./ticket-orders.component.scss'],\n})\nexport class TicketOrdersComponent implements OnInit {\n  loading = true;\n  user: UserFormData;\n  itemList = []\n  users: UserFormData[];\n\n  constructor(\n    private modal: ModalController,\n    private requests: RequestsService,\n    private userService: UsersService,\n    private userCtrl: UserController,\n    private routerOutlet: IonRouterOutlet,\n  ) { }\n\n  ngOnInit() {\n    this.loadData();\n  }\n\n  async loadData() {\n    const userData:any = await this.userCtrl.loadUser();\n    this.user = userData.data;\n    this.users = await this.userService.readAllUsers();\n    this.itemList = await this.requests.readRequestListOrder();\n    this.loading = false;\n    return this.user\n  }\n\n  async doRefresh(refresh?){\n    await this.loadData();\n    if (refresh){ refresh.target.complete(); }\n  }\n\n  async createRequest(){\n    const modalService = await this.modal.create({\n      component: PickServiceComponent,\n      componentProps:{user:this.user},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalService.present();\n    const modalResult1 = await modalService.onWillDismiss();\n    if(modalResult1.data){ this.openRequest(null,modalResult1.data)\n    }\n  }\n\n  async openRequest(request, service){\n    const modalCreate = await this.modal.create({\n      component: NewRequestComponent,\n      componentProps: {service, request, currentUser: this.user, users: this.users },\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modalCreate.present();\n    const modalResult2 = await modalCreate.onWillDismiss();\n    console.log(modalResult2);\n    if(modalResult2.data){ this.loadData()}\n  }\n\n}\n\n"],"names":["Component","CalendarService","FireAuthService","CalendarOrdersComponent","constructor","calendar","auth","name","filter","ngOnInit","loading","loadData","then","user","getUser","currentUser","data","calendarItems","readFutureServicesByUser","uid","Date","toISOString","filterSelected","sort","a","b","startDate","console","log","doRefresh","refresh","target","complete","filterChange","e","detail","value","selector","template","IonRouterOutlet","ModalController","ServicesController","NewRequestComponent","ServicesOrdersComponent","services","routerOutlet","modal","loadServices","type","showCost","space","rent","rentData","cost","pickService","request","service","modalCreate","create","component","componentProps","mode","presentingElement","nativeEl","present","modalResult2","onWillDismiss","changeTab","UserController","PickServiceComponent","UsersService","RequestsService","TicketOrdersComponent","requests","userService","userCtrl","userData","loadUser","users","readAllUsers","itemList","readRequestListOrder","createRequest","modalService","modalResult1","openRequest"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}