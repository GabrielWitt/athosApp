<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" style="background-color: gray;">
    <ion-refresher-content pullingIcon="arrow-down" pullingText="Desliza abajo para refrescar..." refreshingSpinner="dots"></ion-refresher-content> 
  </ion-refresher>
  
  <ion-list *ngIf="loading">
    <app-loading-view></app-loading-view>
  </ion-list>

  <ion-list *ngIf="!loading && myCommunity && !edit">
      <ion-card>
        <ion-row>
          <ion-col size="3">
            <ion-img [src]="myCommunity?.photo" (click)="addPhoto()"></ion-img>
            <div class="cameraButton">
              <ion-icon name="camera-outline" color="light"></ion-icon>
            </div>
          </ion-col>
          <ion-col size="9" class="ion-text-center">
            <ion-item>
              <ion-label>
                <ion-text color="dark" class="ion-text-capitalize">
                  <h1 class="ion-margin-top">{{myCommunity.propertyType}} {{myCommunity.name}}</h1>
                  <h3>{{myCommunity.address}}</h3>
                </ion-text>
              </ion-label>
              <ion-button size="small" color="secondary"  *ngIf="!edit"
              [disabled]="loading" (click)="editCommunity()">Editar</ion-button>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-card>
      <ion-item>
        <ion-label>
          <ion-text>Dirección: {{myCommunity.address}} </ion-text>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <ion-text>Código Postal : {{myCommunity.zipCode}} </ion-text>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <ion-text>Provincia/Estado: {{myCommunity.state}} </ion-text>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <ion-text>Ciudad: {{myCommunity.city}} </ion-text>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <ion-text>País: {{myCommunity.country}} </ion-text>
        </ion-label>
      </ion-item>
    </ion-list>

    <ion-list *ngIf="!loading && myCommunity && edit">
        <ion-card>
          <ion-row>
            <ion-col size="3">
              <ion-img [src]="myCommunity?.photo" (click)="addPhoto()"></ion-img>
              <div class="cameraButton">
                <ion-icon name="camera-outline" color="light"></ion-icon>
              </div>
            </ion-col>
            <ion-col size="9" class="ion-text-center">
              <ion-item>
                <ion-label>
                  <ion-text color="dark" class="ion-text-capitalize">
                    <h1 class="ion-margin-top">{{myCommunity.propertyType}} {{myCommunity.name}}</h1>
                    <h3>{{myCommunity.address}}</h3>
                  </ion-text>
                </ion-label>
                <ion-button size="small" color="secondary"  *ngIf="!edit"
                [disabled]="loading" (click)="editCommunity()">Editar</ion-button>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card>

        <ion-item>
          <ion-label position="stacked">Tipo de Comunidad:</ion-label>
          <ion-select placeholder="Tipo de Comunidad" [value]="myCommunity.propertyType" (ionChange)="handleChange($event)" >
            <ion-select-option value="Barrio">Barrio</ion-select-option>
            <ion-select-option value="Conjunto">Conjunto Habitacional</ion-select-option>
            <ion-select-option value="Comuna">Comuna</ion-select-option>
            <ion-select-option value="Edificio">Edificio</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Nombre:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="nameListener($event)" [value]="myCommunity.name"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Dirección:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="addressListener($event)" [value]="myCommunity.address"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Código Postal:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="zipCodeListener($event)" [value]="myCommunity.zipCode"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Ciudad:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="cityListener($event)" [value]="myCommunity.city"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Provincia/Estado:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="stateListener($event)" [value]="myCommunity.state"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>País:</ion-label>
          <ion-input class="ion-text-center" type="text" (ionChange)="countryListener($event)" [value]="myCommunity.country"></ion-input>
        </ion-item>

        <ion-row class="ion-margin-left ion-margin-right">
          <ion-col>
            <ion-button color="danger" size="small" *ngIf="edit"
            [disabled]="loading" (click)="cancelEditCommunity()">Cancelar</ion-button>
          </ion-col>
          <ion-col class="ion-float-right">
            <ion-button color="success" size="small" *ngIf="edit" class="ion-float-right"
            [disabled]="loading" (click)="updateCommunity()">Enviar</ion-button>
          </ion-col>
        </ion-row>

      </ion-list>

  </ion-content>
